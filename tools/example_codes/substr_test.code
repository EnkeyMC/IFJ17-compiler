.IFJcode17

jump main

# Začátek funkce substr
label substr
createframe

defvar TF@n
defvar TF@i
defvar TF@str

pops TF@n
pops TF@i
pops TF@str

pushframe

defvar LF@substr
defvar LF@anotherchar
defvar LF@counter
defvar LF@total
defvar LF@condition

strlen LF@total LF@str
move LF@substr string@
move LF@counter int@0

lt LF@condition LF@i int@1
sub LF@i LF@i int@1
jumpifeq finalstring LF@condition bool@true

lt LF@condition LF@n int@0
jumpifeq itoend LF@condition bool@true

sub LF@total LF@total LF@i
gt LF@condition LF@n LF@total
jumpifeq itoend LF@condition bool@true

label charloop
jumpifeq finalstring LF@counter LF@n
getchar LF@anotherchar LF@str LF@i
concat LF@substr LF@substr LF@anotherchar
add LF@i LF@i int@1
add LF@counter LF@counter int@1
jump charloop

label itoend
strlen LF@total LF@str
defvar LF@itoendwhilecond

label itoendwhile
lt LF@itoendwhilecond LF@i LF@total
jumpifeq finalstring LF@itoendwhilecond bool@false
getchar LF@anotherchar LF@str LF@i
concat LF@substr LF@substr LF@anotherchar
add LF@i LF@i int@1
jump itoendwhile

label finalstring

pushs LF@substr

popframe

return
# Konec funkce substr


label main

createframe
pushframe

defvar LF@retstr

# Začátek volání funkce substr

pushs string@TestAhojString
pushs int@5
pushs int@4

call substr

pops LF@retstr
# Konec volání funkce

write LF@retstr
write string@\010


pushs string@Test2
pushs int@5
pushs int@4

call substr

pops LF@retstr

write LF@retstr
write string@\010


pushs string@Test3
pushs int@7
pushs int@3

call substr

pops LF@retstr

write LF@retstr
write string@\010

pushs string@Test4
pushs int@0
pushs int@3

call substr

pops LF@retstr

write LF@retstr
write string@\010

pushs string@Test5
pushs int@-8
pushs int@3

call substr

pops LF@retstr

write LF@retstr
write string@\010


pushs string@Test5
pushs int@1
pushs int@3

call substr

pops LF@retstr

write LF@retstr
write string@\010

popframe

